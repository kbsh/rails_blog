<%#
+++
date = "2015-07-08T18:00:51Z"
draft = false
title = "rubyの代入演算子"
categories = ["ruby"]
+++
%>


rubyにも代入演算子が使える。<br>
phpでも`var += 1`といったようなものはよく使用することでしょう。<br>
rubyではこのバリエーションがとても豊富なのでその一部を紹介します。

````rubyの論理演算子の特徴
・左側の式から順に評価する
・論理式の真偽が決定すると、残りの式は評価しない
・最後に評価された式の値が論理式の値となる
・式の真偽は、false,nilの場合が偽、それ以外の場合が真となる
````

この論理演算子の特徴をもとに代入演算子について考えてみます。<br><br>

### var || "foo"

`var ||= "foo"`という式のvarの初期値によってvarの値がどうかわるかを考えてみます。<br>
まず前提として、`||`はor の意味をもちます。左辺、右辺のどちらかが真であれば論理式全体の真偽は真となります。

| `var` が`nil`の場合                                                                                                                                      | `var`が`"bar"`の場合 |
|--------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| ① 左の式`var`を評価 → 偽（値は`nil`）<br>② 論理式の真偽は未決定<br>③ `"foo"`を評価 → 真（値は`"foo"`）<br>④ 論理式の真偽が決定。最終評価式の値は`"foo"`<br><br>`p var #-> "foo"` | ① 左の式`var`を評価 → 真（値は`"bar"`）<br>② 論理式の真偽が決定。最終評価式の値は`"bar"`<br><br><br><br>`p var #-> "bar"` |


### var && "foo"

次は`var &&= "foo"`です。<br>
左辺、右辺のどちらも真であれば論理式全体の真偽は真となります。

| `var` が`nil`の場合                                                                                                                                      | `var`が`"bar"`の場合 |
|--------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| ① 左の式`var`を評価 → 偽（値は`nil`）<br>② 論理式の真偽が決定。最終評価式の値は`nil`<br><br>`p var #-> nil` | ① 左の式`var`を評価 → 真（値は`"bar"`）<br>②論理式の真偽は未決定<br>③ `"foo"`を評価 → 真（値は`"foo"`）<br>④ 論理式の真偽が決定。最終評価式の値は`"foo"`<br><br><br><br>`p var #-> "foo"` |

以上。

