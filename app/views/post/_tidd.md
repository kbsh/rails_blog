<%#
+++
date = "2015-07-02T11:16:51Z"
draft = false
title = "Git + Redmineでチケット駆動開発(ticket-driven development; TiDD)"
categories = ["git"]
+++
%>


```トピック
-何がしたいか
-TiDDとは
-Github-flowとは
-ルール草案
-参考
```

***

### 何がしたいか
###### Redmineでのチケット管理に伴い、Gitと連携する
+ チケットとブランチを関連付ける
 + コミットすると、自動的にチケットにメッセージが投稿される
 + マージすると、自動的にチケットがクローズされる
      + ~~Redmine Git Branch Hook使える？~~
         + ~~Redmineプラグインなのでインストール依頼とか難しそう・・~~
      + ~~git ticket使える？~~
         + ~~Redmineプラグインなのでインストール依頼とか難しそう・・~~
+ ~~RedmineとGitのアカウント、認証を統合（できるらしいが必須ではない）~~
+ ~~リポジトリブラウザ機能により、Redmine上でコミットログを追える（できるらしいが必須ではない）~~

###### ついでにGithubのルールも整える（Github-flowてきなやつ）
+ ブランチルール
+ コミットルール


***

### TiDDとは
+ チケットでタスク管理を行う
+ チケットをもとに作業を行う（チケットなしのコミット禁止）
+ ~~リリースごとにバージョン作成を前提に、リリース計画をたててRedmineでバージョン管理まで行えたらいいね~~
 + ~~Redmineの権限上、バージョンの追加を行えないため、無理そう・・~~


***

### Github-flowとは

###### Github-flow
+ ~~masterブランチ（ステージング）は常にデプロイ可能の状態にする~~
 + QA環境の立て直しが必要
+ ブランチ名は説明的な名前をつける
+ 開発ブランチは定期的にmasterからpull、remoteにpushを行う
 + 競合防止
 + localだけの保存をしない。ログを残す。戻れるようにする。という目的
+ フィードバックが欲しい時はpull requestを作成する
 + merge不要の目印として、[WIP]を付す（work in progress）
+ pull requestは第三者のレビューを必須とする
+ マスターブランチへのコミット禁止
+ ~~merge後はただちにデプロイする~~
 + ステージングでの確認が完了するまでは行わない
+ マージ者はマージ後ブランチ削除をする
 + リモートリポジトリに余計なブランチを残さない
 + ブランチを雑タスクに流用しない

###### Github-flowの特徴
+ 一つのリポジトリを共有
 + アカウントが消えたら死ぬ
 + masterにpushできてしまう
+ Colleborator登録者による集中管理
 + オープンソースプロジェクトには向いていない
+ ブランチでタスク管理ができる

***

### ルール草案

###### 上であげたGithub-flowの遵守

###### その他の規則
+ リベースを積極的に
 + コミットログからマージが消え、綺麗にみえるらしい
+ チケットごとにブランチを作成する
+ ブランチ名をチケット番号にする
 + Github-flowに習い、説明的な名前をつけつつ、チケット番号を付したい
+ コミットメッセージにも説明（日本語）、チケット番号を付す

###### ブランチ命名規則

|　| 命名規則 | 役割 |
|:-----------|:------------:|:------------:|
| 統合ブランチ | master / develop | トピックブランチの生成、合流 |
| トピックブランチ | feat(ure)-{説明}-{(#)チケット番号} | 新規機能 |
| トピックブランチ | (hot)fix-{説明}-{(#)チケット番号} | （重大な）改修 |
| トピックブランチ | release-{説明}-{(#)チケット番号} | ~~世間ではリリース準備用~~<br>（コピペが主な）定常機能<br>すぐにリリースして欲しいもの |


###### コミットメッセージの規則
| 行数 | 内容 |
|:-----------|:------------:|
| １行目 | [feature/fix/release]要約 {#チケット番号} |
| ２行目 | 空白 |
| ３行目 | 本文 |

***

### 参考
Git+Redmine+チケット駆動開発のワークフロー
http://azu.github.io/slide/workflow/git-redmine-tidd.html

TiDDとgit-flowを合わせた開発手法について
http://tech-gym.com/2011/08/git/467.html

git flowとgithub flowざっくりまとめ
http://komaken.me/blog/2013/09/09/git-flow%E3%81%A8github-flow%E3%81%96%E3%81%A3%E3%81%8F%E3%82%8A%E3%81%BE%E3%81%A8%E3%82%81/

ぼくが実際に運用していたGitブランチモデルについて
http://havelog.ayumusato.com/develop/git/e513-git_branch_model.html

ブランチの命名規則で迷うことが増えた
http://www.hirokonakahara.com/blog/?p=1734

コミットメッセージを記述する際のルール http://promamo.com/?p=3480

***

